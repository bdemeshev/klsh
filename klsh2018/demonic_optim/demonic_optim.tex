\documentclass[12pt]{article}

\usepackage{hyperref} % гиперссылки

\usepackage{tikz} % картинки в tikz
\usepackage{microtype} % свешивание пунктуации

\usepackage{array} % для столбцов фиксированной ширины

\usepackage{indentfirst} % отступ в первом параграфе

\usepackage{sectsty} % для центрирования названий частей
\allsectionsfont{\centering}

\usepackage{amsmath} % куча стандартных математических плюшек

\usepackage{comment} % добавление длинных комментариев

\usepackage[top=2cm, left=1.2cm, right=1.2cm, bottom=2cm]{geometry} % размер текста на странице

\usepackage{lastpage} % чтобы узнать номер последней страницы

\usepackage{enumitem} % дополнительные плюшки для списков
%  например \begin{enumerate}[resume] позволяет продолжить нумерацию в новом списке

\usepackage{caption} % что-то делает с подписями рисунков :)

\usepackage{qcircuit} % для рисовки квантовых диаграмм
\usepackage{physics} % бракеты

\usepackage{answers} % разделение условий и ответов в упражнениях

\usepackage{chessboard} % рисование шахматной доски


\usepackage{fancyhdr} % весёлые колонтитулы
\pagestyle{fancy}
\lhead{Демоническая оптимизация}
\chead{}
\rhead{КЛШ-2018}
\lfoot{}
\cfoot{}
\rfoot{\thepage/\pageref{LastPage}}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}



\usepackage{todonotes} % для вставки в документ заметок о том, что осталось сделать
% \todo{Здесь надо коэффициенты исправить}
% \missingfigure{Здесь будет Последний день Помпеи}
% \listoftodos — печатает все поставленные \todo'шки



\usepackage{booktabs} % красивые таблицы
% заповеди из докупентации:
% 1. Не используйте вертикальные линни
% 2. Не используйте двойные линии
% 3. Единицы измерения - в шапку таблицы
% 4. Не сокращайте .1 вместо 0.1
% 5. Повторяющееся значение повторяйте, а не говорите "то же"



\usepackage{fontspec} % что-то про шрифты?
\usepackage{polyglossia} % русификация xelatex

\setmainlanguage{russian}
\setotherlanguages{english}

% download "Linux Libertine" fonts:
% http://www.linuxlibertine.org/index.php?id=91&L=1
\setmainfont{Linux Libertine O} % or Helvetica, Arial, Cambria
% why do we need \newfontfamily:
% http://tex.stackexchange.com/questions/91507/
\newfontfamily{\cyrillicfonttt}{Linux Libertine O}

\AddEnumerateCounter{\asbuk}{\russian@alph}{щ} % для списков с русскими буквами
\setlist[enumerate, 2]{label=\asbuk*),ref=\asbuk*}

%% эконометрические сокращения
\DeclareMathOperator{\Cov}{Cov}
\DeclareMathOperator{\Corr}{Corr}
\DeclareMathOperator{\Var}{Var}
\DeclareMathOperator{\E}{E}
\def \hb{\hat{\beta}}
\def \hs{\hat{\sigma}}
\def \htheta{\hat{\theta}}
\def \s{\sigma}
\def \hy{\hat{y}}
\def \hY{\hat{Y}}
\def \v1{\vec{1}}
\def \e{\varepsilon}
\def \he{\hat{\e}}
\def \z{z}
\def \hVar{\widehat{\Var}}
\def \hCorr{\widehat{\Corr}}
\def \hCov{\widehat{\Cov}}
\def \cN{\mathcal{N}}



\usepackage[bibencoding = auto,
backend = biber,
sorting = none,
style=alphabetic]{biblatex}

\addbibresource{em1_pset_v2.bib}



% делаем короче интервал в списках
\setlength{\itemsep}{0pt}
\setlength{\parskip}{0pt}
\setlength{\parsep}{0pt}




\Newassociation{sol}{solution}{solution_file}
% sol --- имя окружения внутри задач
% solution --- имя окружения внутри solution_file
% solution_file --- имя файла в который будет идти запись решений
% можно изменить далее по ходу
\Opensolutionfile{solution_file}[all_solutions]
% в квадратных скобках фактическое имя файла

% магия для автоматических гиперссылок задача-решение
\newlist{myenum}{enumerate}{3}
% \newcounter{problem}[chapter] % нумерация задач внутри глав
\newcounter{problem}[section]

\newenvironment{problem}%
{%
\refstepcounter{problem}%
%  hyperlink to solution
     \hypertarget{problem:{\thesection.\theproblem}}{} % нумерация внутри глав
     % \hypertarget{problem:{\theproblem}}{}
     \Writetofile{solution_file}{\protect\hypertarget{soln:\thesection.\theproblem}{}}
     %\Writetofile{solution_file}{\protect\hypertarget{soln:\theproblem}{}}
     \begin{myenum}[label=\bfseries\protect\hyperlink{soln:\thesection.\theproblem}{\thesection.\theproblem},ref=\thesection.\theproblem]
     % \begin{myenum}[label=\bfseries\protect\hyperlink{soln:\theproblem}{\theproblem},ref=\theproblem]
     \item%
    }%
    {%
    \end{myenum}}
% для гиперссылок обратно надо переопределять окружение
% это происходит непосредственно перед подключением файла с решениями





\begin{document}

\tableofcontents{}

\section*{Цель}


\section{Забери камень}




\begin{problem}

Четыреста лет назад, в 1612 г. в Лионе появилась книга поэта и математика Баше де Мезирьяка
(Claude Gaspar Bachet de M\'eziriac
\footnote{Баше де Мезирьяк перевел с греческого на латынь Арифметику Диофаната,
на полях которой Ферма сформулировал свою великую теорему})
«Занимательные и приятные числовые задачи» (Probl\`emes plaisants et d\'electables qui se font par les nombres).
В ней была предложена следующая игра. Двое по очереди называют числа от 1 до 10, выигрывает тот,
кто первым доведет сумму до 100. В чью пользу эта игра?

Ссылка на переиздание 1884 года \url{http://cnum.cnam.fr/DET/8PY45.html}, задача 22.

\begin{sol}

\end{sol}
\end{problem}



\begin{problem} Цзяньшинцзы «Выбирание камней»

Древний Китай. Две кучки камней. Два игрока ходят по очереди.
За один ход можно забрать либо произвольное число камней из одной кучки,
либо одинаковое число камней из обеих. В одной кучке 5, а в другой — 8 камней.

Кто выигрывает при правильной игре?

\begin{sol}

\end{sol}
\end{problem}


\begin{problem} «Одинокий ферзь»

Шахматная доска, одинокий раненый ферзь стоит на h6.
Раненый ферзь как и ферзь может двигаться на любое число клеток,
но только влево или вниз, или влево-вниз. Двое игроков ходят по очереди,
тот кто переставит ферзя на а1 выиграл.
\begin{enumerate}
\item В чью пользу эта игра? Если в пользу первого, то с какого хода следует начать игру?
\item Найдите 10 отличий игры «Одинокий ферзь» от игры «Цзяньшинцзы»
\end{enumerate}

\def\mylist{Qh6}
\setchessboard{setpieces=\mylist,showmover=false}
\chessboard

\begin{sol}

\end{sol}
\end{problem}

\begin{problem} «Набери чет»

В кучке 135 камней, двое по очереди забирают себе от 1 до 4 камней.
Выигрывает тот, кто к концу игры наберет четное число камней.

Кто выигрывает при правильной игре?

\begin{sol}

\end{sol}
\end{problem}


\section{Дерево игры}

\begin{problem} Кортес

Кортес с бандой головорезов высадился на берегу.
Кортес выбирает, нападать ли на деревушку или нет.

Местная деревушка может либо сразу перейти в подчинение Кортеса, либо принять бой.
Если деревушка примет бой, то выбор появится у Кортеса: либо драться до победного конца,
либо после первых потерь бежать на кораблях обратно.

Ценность деревушки для Кортеса — одна единица, ценность собственных головорезов — 2 единицы.
Если Кортес будет драться до конца, то деревушка будет взята,
но большинство головорезов погибнет в бою. Для жителей деревушки — главное остаться в живых,
сохранить при этом независимость, конечно, желательно.

\begin{enumerate}
  \item Нарисуй дерево игры и найди обратно-индукционный исход.
  \item Нарисуйте дерево игры и найдите обратно-индукционный исход в случае, если Кортес сжёг корабли.
\end{enumerate}

\begin{sol}

\end{sol}
\end{problem}

\begin{problem} Рулетки

Есть три рулетки: на первой равновероятно выпадают числа 2, 4 и 9; на второй — 1, 6 и 8;
на третьей — 3, 5 и 7. Сначала первый игрок выбирает рулетку себе,
затем второй игрок выбирает рулетку себе из двух оставшихся.
После этого рулетки, выбранные игроками, запускаются, и случай определяет победителя.
Победителем считается тот, чья рулетка покажет большее число.

Победитель получает от проигравшего 100 рублей.

В чью пользу эта игра?

\begin{sol}
Вероятность выигрыша для второго игрока — $5/9$.
\end{sol}
\end{problem}


\section{Определение высоты здания}

\section{Подбрасывание кубики}

\section{ООР и РОО}

\section{ООР и РОО с правом выбора}

\section{Ним-стоимость}

\section{Ним-подобные игры}

\section{Задача о разборчивой невесте}

\section{Биномиальная модель цены акции}

\section{Опционы американского типа}






\Closesolutionfile{solution_file}

% для гиперссылок на условия
% http://tex.stackexchange.com/questions/45415
\renewenvironment{solution}[1]{%
         % add some glue
         \vskip .5cm plus 2cm minus 0.1cm%
         {\bfseries \hyperlink{problem:#1}{#1.}}%
}%
{%
}%

\section{Решения}
\input{all_solutions}



\end{document}
